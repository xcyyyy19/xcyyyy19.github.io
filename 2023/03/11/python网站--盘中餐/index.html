<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Python网站--盘中餐 |  Pravite Home</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="Pravite Home" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-python网站--盘中餐"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Python网站--盘中餐
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/11/python%E7%BD%91%E7%AB%99--%E7%9B%98%E4%B8%AD%E9%A4%90/" class="article-date">
  <time datetime="2023-03-11T03:43:00.000Z" itemprop="datePublished">2023-03-11</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">9.7k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">34 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="基于Django-的“盘中餐”健康饮食网站的设计与实现"><a href="#基于Django-的“盘中餐”健康饮食网站的设计与实现" class="headerlink" title="基于Django 的“盘中餐”健康饮食网站的设计与实现"></a>基于Django 的“盘中餐”健康饮食网站的设计与实现</h2><p>党的十八大以来，党中央高度重视节粮减损工作，强调要采取综合措施降低粮食损耗浪费，坚决刹住浪费粮食的不良风气。近年来，各地区各部门认真贯彻落实党中央有关决策部署，不断加大厉行节约、反对食物浪费工作力度[1]。“舌尖上的浪费”现象有所改观，但仍然存在，特别是年轻一代人中，其中高校食堂的食物浪费较为严重。为让“光盘行动”走近每个人，设计了一个基于 Django 的“盘中餐”健康饮食网站，通过交互的“光盘打卡”和直观的“光盘打卡排名”激励用户真正将“光盘行动”进行到底。</p>
<p>基于 Django 的“盘中餐”健康饮食网站分为两大模块，用户模块和管理员模块。用户模块处理用户基本操作，注册，登录。用户通过登录后，管理个人信息，发布每日“光盘打卡”，发表文章和评论，查看打卡排名、食物热量信息和新闻资讯。管理员模块主要分为用户管理和网站后台管理。管理员对用户信息、文章分享、食物类型和食物信息等进行数据增加和删除操作的维护和管理。管理员也对用户的每日打卡进行次数排名，发布打卡次数榜单。最后，管理员对网站后台进行系统管理，主要管理网站的轮播图和发布、删除新闻资讯。</p>
<p>基于 Django 的“盘中餐”健康饮食网站采用 Python 语言和前后端分离方式开发， 前端使用 HTML、CSS 和 Vue.js 框架，后端使用 Django 框架。数据库采用 MySQL。经过测试，网站系统运行稳定，页面设计简洁，功能合理易用，并实现了宣传节约粮食与“光盘行动”共同激励用户的效果。</p>
<h1 id="目-录"><a href="#目-录" class="headerlink" title="目 录"></a>目 录</h1><p>第 1 章 绪 论 1</p>
<ol>
<li><p><a href="#%E8%AF%BE%E9%A2%98%E8%83%8C%E6%99%AF">课题背景 1</a></p>
<ol>
<li><p><a href="#%E7%9B%AE%E7%9A%84%E4%B8%8E%E6%84%8F%E4%B9%89">目的与意义 1</a></p>
</li>
<li><p><a href="#%E8%AE%BA%E6%96%87%E7%A0%94%E7%A9%B6%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9">论文研究主要内容 1</a></p>
<p><a href="#%E7%AC%AC-2-%E7%AB%A0-%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E4%BB%8B%E7%BB%8D">第 2 章 关键技术介绍 3</a></p>
</li>
<li><p>PYTHON 语言 3</p>
</li>
<li><p>DJANGO 框架 3</p>
</li>
<li><p>ORM 框架 3</p>
</li>
<li><p>VUE.JS 框架 3</p>
</li>
<li><p><a href="#layui-%E6%A1%86%E6%9E%B6">LAYUI 框架 4</a></p>
<p><a href="#%E7%AC%AC-3-%E7%AB%A0-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90">第 3 章 需求分析 5</a></p>
</li>
<li><p><a href="#%E5%8A%9F%E8%83%BD%E6%80%A7%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90">功能性需求分析 5</a></p>
<ol>
<li><a href="#%E8%AF%84%E8%AE%BA%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD%E7%94%A8%E4%BE%8B%E6%8F%8F%E8%BF%B0">评论文章功能用例描述 6</a></li>
<li>新增每日打卡功能用例描述 7</li>
<li>查看食物信息功能用例描述 7</li>
<li>修改新闻资讯功能用例描述 8</li>
</ol>
</li>
<li><p>系统原型 8</p>
</li>
<li><p>系统开发环境 10</p>
</li>
<li><p>系统可行性分析 11</p>
<ol>
<li><p>技术可行性分析 11</p>
</li>
<li><p>安全可行性分析 11</p>
<p><a href="#%E7%AC%AC-4-%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1">第 4 章 系统设计 12</a></p>
</li>
</ol>
</li>
<li><p><a href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">体系结构设计 12</a></p>
</li>
<li><p><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1">数据库设计 12</a></p>
<p><a href="#_TOC_250017">4.2.1 E-R 图 12</a></p>
<p><a href="#%E8%A1%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">4.2.2 表结构设计 13</a></p>
</li>
<li><p><a href="#43-json-%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1">JSON 接口设计 15</a></p>
<p><a href="#%E7%AC%AC-5-%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0">第 5 章 系统实现 18</a></p>
</li>
<li><p><a href="#%E5%90%8E%E5%8F%B0%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0">后台功能模块实现 18</a></p>
<ol>
<li><a href="#%E6%96%B0%E5%A2%9E%E9%A3%9F%E7%89%A9%E7%B1%BB%E5%9E%8B%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0">新增食物类型功能模块实现 18</a></li>
<li><a href="#%E5%88%A0%E9%99%A4%E6%96%87%E7%AB%A0%E5%88%86%E4%BA%AB%E7%9A%84%E5%B8%96%E5%AD%90%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0">删除文章分享的帖子功能模块实现 19</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E6%AF%8F%E6%97%A5%E6%89%93%E5%8D%A1%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0">修改每日打卡信息模块实现 20</a></li>
</ol>
</li>
<li><p><a href="#%E5%89%8D%E5%8F%B0%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0">前台功能模块实现 22</a></p>
<ol>
<li><p>用户查看每日打卡详情功能模块实现 22</p>
<p><a href="#%E7%AC%AC-6-%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E6%B5%8B%E8%AF%95">第 6 章 系统测试 24</a></p>
</li>
</ol>
</li>
<li><p><a href="#%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95">功能测试 24</a></p>
<ol>
<li><a href="#%E9%A3%9F%E7%89%A9%E7%B1%BB%E5%9E%8B%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%E6%B5%8B%E8%AF%95">食物类型管理模块测试 24</a></li>
<li><a href="#%E7%AE%A1%E7%90%86%E5%91%98%E6%96%B0%E5%A2%9E%E6%96%B0%E9%97%BB%E8%B5%84%E8%AE%AF%E6%A8%A1%E5%9D%97%E6%B5%8B%E8%AF%95">管理员新增新闻资讯模块测试 24</a></li>
<li><a href="#%E7%94%A8%E6%88%B7%E6%A6%9C%E5%8D%95%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%E6%B5%8B%E8%AF%95">用户榜单管理模块测试 24</a></li>
<li><a href="#%E7%94%A8%E6%88%B7%E6%AF%8F%E6%97%A5%E6%89%93%E5%8D%A1%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%E6%B5%8B%E8%AF%95">用户每日打卡管理模块测试 25</a></li>
</ol>
</li>
<li><p><a href="#%E6%B5%8B%E8%AF%95%E7%BB%93%E8%AE%BA">测试结论 25</a></p>
</li>
</ol>
</li>
</ol>
<p>第 <strong>1</strong> 章 绪 论</p>
<h2 id="课题背景"><a href="#课题背景" class="headerlink" title="课题背景"></a>课题背景</h2><p>随着国家科技与经济的快速发展，我国人民从解决温饱问题过度到探寻“舌尖上的美食”，达到营养摄入均衡。但随之而来的“舌尖上的浪费”却也成为社会各界关注的问题。虽然在杜绝食物浪费方面政府部门制定相关政策和行动，社会各界也通过宣传等方式做出过相应的努力，食物浪费现象有所改善，但依旧存在，特别是在年轻一代中最为明显。但这一群体是互联网的主要用户群体，伴随互联网技术发展日新月异，万物互联的氛围给健康饮食，杜绝食物浪费理念带来了新的宣传发展契机。推行新的以互联网为载体的宣传方式，针对互联网用户倡导健康文明的饮食观点，让用户身临其境参与到健康文明的饮食文化中，从而使“光盘行动”有效进行。</p>
<h2 id="目的与意义"><a href="#目的与意义" class="headerlink" title="目的与意义"></a>目的与意义</h2><p>中国作为人口大国仓廪实，才能天下安。在粮食增收的同时，粮食使用方面，浪费粮食的问题十分突出。据中国科学院地理科学与资源研究所课题组此前的一份研究报告显示，我国餐饮食物浪费量约为每年 1700 万至 1800 万吨[2]。为了加强建立正确健康的饮食观，2022 年中央一号文件就有提到“坚持节约优先，落实粮食节约行动方案，深入推进产运储加消全链条节粮减损，强化粮食安全教育，反对食物浪费。”食物浪费不仅威胁粮食安全、破坏社会风气，还会消耗资源环境。食品行业带来的碳排放约占全球碳排放总量的 25%，远远领先于建筑行业的 10%和时尚行业的 5%。与此形成鲜明对比的是，据联合国环境规划署估计，全球有 17%的食品被浪费，也就是说有 4%的全球碳排放是由消费者食物浪费造成的。“盘中餐”健康饮食网站的开发，可以带动互联网用户设身处地加入杜绝食物浪费的队伍中，为粮食安全，为“双碳”做出贡献。</p>
<h2 id="论文研究主要内容"><a href="#论文研究主要内容" class="headerlink" title="论文研究主要内容"></a>论文研究主要内容</h2><p>本论文主要论述了基于 Django 的“盘中餐”健康饮食网站的设计与实现。从关键技术介绍、整体系统需求分析、各不同模块的详细设计与实现、系统部署与系统测试方面详细描述网站的设计与实现。具体内容如下：</p>
<p>首先介绍论文所研究课题的背景及目的和意义，并分析国内外的研究概况。又介绍了包括 Django 框架、Vue.js 框架、Element-UI 可视化库和 LayUI 框架在内的关键技术。</p>
<p>再者基于软件工程开发的思想对“盘中餐”健康饮食网站进行了详细的需求分析和系统原型分析。对用户与管理员两大模块下的个人信息、每日“光盘打卡”、打卡排名、</p>
<p>用户管理等子模块根据系统的需求分析进行体系结构设计、数据库设计和接口设计。最后为系统的实现与测试，根据需求分析与设计给出关键性函数代码，并运用图文</p>
<p>阐述实现过程。系统测试网站设计功能的可行性与完整性。</p>
<h2 id="国内外研究现状"><a href="#国内外研究现状" class="headerlink" title="国内外研究现状"></a>国内外研究现状</h2><p>为保护资源环境、保障粮食安全、减少粮食损耗，多个国家和地区从战略、立法、技术等方面进行反对食物浪费。互联网技术领域，美国西雅图有一款名为：Lefoverswap APP，这款 APP 以相同的食物回收理念，回收处于过期前的安全食物的方式，减少食物浪费。但 Lefoverswap APP 的受众是群体与群体之间，缺少一定的市场活力。根据国内现状，食物浪费的原因除了临近过期食物的浪费外，主要原因为消费者在餐桌的过度浪费。深圳市科拜斯物联网科技有限公司发明了基于物联网的 AI 识别食物消费监控装置， 但其使用具有区域局限性，也很难让消费者主动参与“光盘行动”。以此基于 Django 的“盘中餐”健康饮食网站，采用当下较为流行的开放源代码的 Web 应用框架 Django 来实现以打卡光盘次数为主要功能的开放讨论网站，从以消费者为源头杜绝食物浪费。</p>
<h1 id="第-2-章-关键技术介绍"><a href="#第-2-章-关键技术介绍" class="headerlink" title="第 2 章 关键技术介绍"></a>第 <strong>2</strong> 章 关键技术介绍</h1><ol>
<li><p><strong>Python</strong> 语言</p>
<p>Python 是一款免费开源、跨平台、易学易用的面向对象的高级编程语言。还是一个多用途的高级编程语言，其涉足的领域很广泛如：Web 和 Internet 开发、大数据分析、爬虫开发、自动化运维和游戏开发等，将不同背景的人结合在一起沟通方便。Python 有一组功能完备的标准库，可以自动管理内存，使用脚本语言处理系统管理任务，并且由于 Python 代码量小，维护成本低、编程效率高等优点已经使其成为当前运用最广的编程语言之一[3]。</p>
<ol>
<li><p><strong>Django</strong> 框架</p>
<p>Python 下有 Flask、Django、Tornado 等许多款不同可供选择的 Web 框架,其中Django 框架是主流框架中最有代表性的一位，它最早是被用于开发管理劳伦斯集团下的一些以新闻内容为主网站的内容管理系统软件[4]。</p>
<p>Django 框架借鉴经典的 MVC 模式，将交互过程分为 3 个层次（Model 数据存储层、Template 模板层和 View 业务逻辑层），MTV 设计模式。使用 MTV 模式让被开发的系统应用具有可扩展性、可重用性和模块化[5]。与 MVC 模式比较，MTV 模式将 MVC 模式中的 View 层拿出来分离，将视图显示与如何显示交给了 Template 层，而 View 层更专注与业务逻辑的实现[6]。</p>
<p>Django 框架功能完善，自带大量常用工具包和插件，方便高效快速地开发网站。比如本项目中使用 django-allauth 实现用户注册和认证、django-environ 进行项目配置、django-click 管理命令。</p>
</li>
<li><p><strong>ORM</strong> 框架</p>
<p>ORM 框架是 Django 框架中强大的数据库访问组件。ORM 框架把类和数据表进行映射，根据所设计的类，主动生成数据库中的表格，省去了创建表的过程。ORM 框架可直接定义模型类，通过模型类和对象完成数据表的增、删、改、查操作，不需要直接面向数据库编程，使得开发者无需学习过多的 SQL 语言，即可方便的配置、切换、操作数据库。</p>
</li>
<li><p><strong>Vue.js</strong> 框架</p>
<p>Vue.js 框架是基于 MVVM 设计模式用于构建用户界面的渐进式 Web 框架[7]。Vue.js 框架只关注视图层，采用自底向上增量开发的设计。Vue.js 框架结合观察者模式实现双向数据的数据绑定，主要用到 Object.defineProperty 函数的 getter 和 setter 方法。</p>
</li>
</ol>
</li>
</ol>
<p>当访问定义在 data 对象中的单个属性时系统调用 getter 方法，当修改定义在 data 对象中的单个属性时系统调用 setter 方法[8]。Vue.js 框架的目的是通过尽可能简单的 API 实现响应数据绑定和组合的视图组件，从而减少代码编写量，高效开发应用。本项目中使用 Vue.js 实现管理员个人中心，菜单等前端页面功能。</p>
<h2 id="LayUI-框架"><a href="#LayUI-框架" class="headerlink" title="LayUI 框架"></a>LayUI 框架</h2><p>LayUI 是一款免费，开源，轻量级的前端 CMS 框架，也是采用自身模块规范编写的前端 UI 框架，遵循原生 HTML、CSS 和 JS 的书写与组织形式，体积轻盈，适用于企业后端，进行界面的快速开发[9]。LayUI 与 Vue.js 的区别在于数据和视图是不是关联。Vue.js 将数据和视图绑定，而 LayUI 不提供此功能，如果数据和视图改变需要开发人员刷新。LayUI 基于 DOM 驱动，在实现前端页面的增、删、改、查都需要查询 DOM 元素，所以在不需要交互时，LayUI 使用更方便。在本项目中使用 LayUI 框架实现对用户模块和管理员模块打卡次数、日期、上传文件类型等控制。</p>
<h1 id="第-3-章-需求分析"><a href="#第-3-章-需求分析" class="headerlink" title="第 3 章 需求分析"></a>第 <strong>3</strong> 章 需求分析</h1><h2 id="功能性需求分析"><a href="#功能性需求分析" class="headerlink" title="功能性需求分析"></a>功能性需求分析</h2><p>根据调研分析，盘中餐健康饮食网站分为用户和管理员。前台用户功能设计包括登录注册、发布文章帖子、评论文章、查看新闻资讯、查看食物信息、查看每日打卡等功能。后台管理分为用户管理与管理员管理两种。用户后台管理的主要功能设计包括修改个人信息和密码，新增每日打卡，修改打卡内容，查看打卡榜单。管理员后台的主要功能设计包括新增用户、删除用户、文章分享管理、新增食物类型、删除食物类型、对用户的每日打卡添加榜单、管理榜单、系统管理等功能。</p>
<p>前台用例图如图 3.1 所示，后台用例图如图 3.2 所示。</p>
<p><img src="/media/f152757863288dcbacc11ed915646012.jpeg"></p>
<p>图 3.1 前台用例图</p>
<p><img src="/media/d36648908f52440d0d53f9f7ec820674.jpeg"></p>
<h3 id="评论文章功能用例描述"><a href="#评论文章功能用例描述" class="headerlink" title="评论文章功能用例描述"></a>评论文章功能用例描述</h3><p>图 3.2 后台用例图</p>
<p>登录成功的用户查看文章分享，点击相对应的文章，进入该文章的详情页，点击评论按钮。评论文章功能用例描述如表 3.1 所示。</p>
<p>表 3.1 评论文章功能用例描述</p>
<table>
<thead>
<tr>
<th>用例标识</th>
<th>UC1</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>用例名称</td>
<td>评论文章</td>
<td></td>
</tr>
<tr>
<td>参与者</td>
<td>用户</td>
<td></td>
</tr>
<tr>
<td>前置条件</td>
<td>用户登录后进入文章分享详情页面，点击相对应的文章查看文章，点击评论 按钮。</td>
<td></td>
</tr>
<tr>
<td>后置条件</td>
<td>用户发表评论成功</td>
<td></td>
</tr>
<tr>
<td>用例概述</td>
<td>用户进入文章分享详情页，点击相应的文章查看，点击评论，发表评论。</td>
<td></td>
</tr>
<tr>
<td>基本事件流</td>
<td>参与者动作</td>
<td>系统响应</td>
</tr>
<tr>
<td></td>
<td>1.已登录的用户进入分享文章页面。   3.用户点击相应文章。   5.用户点击评论。</td>
<td>2.系统跳转到分享文章详情页，显示文章列表。  4.系统跳转到文章详情页。显示文章内容和评论。</td>
</tr>
</tbody></table>
<p>续表 3.1 评论文章功能用例描述</p>
<table>
<thead>
<tr>
<th>基本事件流</th>
<th>参与者动作</th>
<th>系统响应</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>7.用户输入评论后，点击评论。</td>
<td>6.系统跳转添加评论页面。  系统提示“发表成功”。 系统跳转到文章详情页，在评论列表显 示该评论。</td>
</tr>
<tr>
<td>备选事件流</td>
<td>无</td>
<td></td>
</tr>
</tbody></table>
<h3 id="新增每日打卡功能用例描述"><a href="#新增每日打卡功能用例描述" class="headerlink" title="新增每日打卡功能用例描述"></a>新增每日打卡功能用例描述</h3><p>登录成功的用户在后台管理中点击每日打卡，查看每日打卡列表，点击新增按钮添加打卡信息。新增每日打卡功能用例描述如表 3.2 所示。</p>
<p>表 3.2 新增每日打卡功能用例描述</p>
<table>
<thead>
<tr>
<th>用例标识</th>
<th>UC2</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>用例名称</td>
<td>新增每日打卡</td>
<td></td>
</tr>
<tr>
<td>参与者</td>
<td>用户</td>
<td></td>
</tr>
<tr>
<td>前置条件</td>
<td>用户登录后进入后台管理，点击每日打卡查看打卡列表，点击新增按钮。</td>
<td></td>
</tr>
<tr>
<td>后置条件</td>
<td>用户新增每日打卡成功</td>
<td></td>
</tr>
<tr>
<td>用例概述</td>
<td>用户进入后台管理的每日打卡详情页，点击新增，添加每日打卡信息。</td>
<td></td>
</tr>
<tr>
<td>基本事件流</td>
<td>参与者动作</td>
<td>系统响应</td>
</tr>
<tr>
<td></td>
<td>1.已登录的用户点击后台管理按钮。</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>2.系统跳转到后台管理页面。</td>
</tr>
<tr>
<td></td>
<td>3.用户点击每日打卡。</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>4.系统显示每日打卡列表。</td>
</tr>
<tr>
<td></td>
<td>5.用户点击新增按钮</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>6.系统跳转添加每日打卡页面。</td>
</tr>
<tr>
<td></td>
<td>7.用户在添加页面输入打卡内容如打卡名称、空盘次数、时间等信息，点击提交按钮。</td>
<td>系统显示“操作成功”。 系统跳转每日打卡列表页面显示本次添加的打卡信息。</td>
</tr>
<tr>
<td>备选事件流</td>
<td>无</td>
<td></td>
</tr>
</tbody></table>
<h3 id="查看食物信息功能用例描述"><a href="#查看食物信息功能用例描述" class="headerlink" title="查看食物信息功能用例描述"></a>查看食物信息功能用例描述</h3><p>登录成功的管理员在后台管理中点击食物信息，在食物信息列表选择对应食物，点击详情按钮，查看食物信息详情。查看食物信息功能用例描述如表 3.3 所示。</p>
<p>表 3.3 查看食物信息功能用例描述</p>
<table>
<thead>
<tr>
<th>用例标识</th>
<th>UC3</th>
</tr>
</thead>
<tbody><tr>
<td>用例名称</td>
<td>查看食物信息</td>
</tr>
<tr>
<td>参与者</td>
<td>管理员</td>
</tr>
<tr>
<td>前置条件</td>
<td>管理员登录后进入后台管理，点击食物信息查看食物信息列表，点击对应食物信 息的详情按钮。</td>
</tr>
<tr>
<td>后置条件</td>
<td>成功显示对应食物信息详情页</td>
</tr>
<tr>
<td>用例概述</td>
<td>管理员进入后台管理的食物信息页面，在食物信息列表点击对应食物的详情按钮， 查看食物信息详情。</td>
</tr>
</tbody></table>
<p>续表 3.3 查看食物信息功能用例描述</p>
<table>
<thead>
<tr>
<th>基本事件流</th>
<th>参与者动作</th>
<th>系统响应</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>1.已登录的管理员，点击食物信</td>
<td></td>
</tr>
<tr>
<td></td>
<td>息。</td>
<td>2.系统跳转到食物信息列表页面。显示所</td>
</tr>
<tr>
<td></td>
<td></td>
<td>有食物类别的食物信息。</td>
</tr>
<tr>
<td></td>
<td>3.管理员点击对应食物信息的详</td>
<td></td>
</tr>
<tr>
<td></td>
<td>情按钮。</td>
<td>4.系统跳转到对应食物信息的详情页面，</td>
</tr>
<tr>
<td></td>
<td></td>
<td>显示对应食物的名称，类别，图片，热量</td>
</tr>
<tr>
<td></td>
<td></td>
<td>值信息。</td>
</tr>
<tr>
<td>备选事件流</td>
<td>无</td>
<td></td>
</tr>
</tbody></table>
<h3 id="修改新闻资讯功能用例描述"><a href="#修改新闻资讯功能用例描述" class="headerlink" title="修改新闻资讯功能用例描述"></a>修改新闻资讯功能用例描述</h3><p>登录成功的管理员在后台管理的系统管理下拉菜单中点击新闻资讯，在新闻资讯列表中选择对应的资讯信息，点击修改按钮进行信息修改。修改新闻资讯功能用例描述如表 3.4 所示。</p>
<p>表 3.4 修改新闻资讯功能用例描述</p>
<table>
<thead>
<tr>
<th>用例标识</th>
<th>UC4</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>用例名称</td>
<td>修改新闻资讯</td>
<td></td>
</tr>
<tr>
<td>参与者</td>
<td>管理员</td>
<td></td>
</tr>
<tr>
<td>前置条件</td>
<td>管理员登录后进入后台管理，选择系统管理下拉菜单中的新闻资讯，在新闻资讯 列表中选择对应的新闻，点击修改按钮。</td>
<td></td>
</tr>
<tr>
<td>后置条件</td>
<td>成功修改新闻资讯内容</td>
<td></td>
</tr>
<tr>
<td>用例概述</td>
<td>用户进入后台管理的新闻资讯页面，在新闻资讯列表点击对应新闻的修改按钮， 修改新闻内容。</td>
<td></td>
</tr>
<tr>
<td>基本事件流</td>
<td>参与者动作</td>
<td>系统响应</td>
</tr>
<tr>
<td></td>
<td>1.已登录的管理员，在系统管理下拉菜单，点击新闻资讯。</td>
<td>2.系统跳转到新闻资讯列表，显示所有新闻资讯。</td>
</tr>
<tr>
<td></td>
<td>3.管理员点击对应新闻的修改按钮。</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>4.系统跳转到新闻信息编辑详情页。</td>
</tr>
<tr>
<td></td>
<td>5.管理员修改完成后，点击提交按钮。</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>系统显示“操作成功”。 系统跳转到新闻资讯列表，显示对应修 改后的新闻资讯。</td>
</tr>
<tr>
<td>备选事件流</td>
<td>无</td>
<td></td>
</tr>
</tbody></table>
<h2 id="系统原型"><a href="#系统原型" class="headerlink" title="系统原型"></a>系统原型</h2><p>用户在想要评论的文章详情页面点击评论，系统弹出添加评论窗口，含有两个按钮， 分别对应评论发表成功和重置评论。用户评论文章原型图如图 3.3 所示。</p>
<p><img src="/media/67be40de8257f28f7e6bd8bf78c6e5e5.jpeg"></p>
<p>图 3.3 用户评论文章原型图</p>
<p>用户进入后台管理页面，在新增每日打卡详情页输入打卡名称、照片、空盘次数、打卡时间等信息进行每日打卡。用户新增每日打卡原型图如图 3.4 所示。</p>
<p><img src="/media/e1476e996ddfd3bc7ac1934cf1003d94.jpeg"></p>
<p>图 3.4 用户新增每日打卡原型图</p>
<p>管理员在后台管理的食物信息页面，点击对应食物的详情按钮，查看对应食物信息的详情页。管理员查看食物信息原型图如图 3.5 所示。</p>
<p><img src="/media/313282be30af592bd821fe765042c477.jpeg"></p>
<p>图 3.5 管理员查看食物信息原型图</p>
<p>管理员在后台管理的榜单页面，在修改榜单的详情，修改榜单信息。管理员修改榜单原型图如图 3.6 所示。</p>
<p><img src="/media/cb54c343d764453b60e94571a48d192b.jpeg"></p>
<p>图 3.6 管理员修改榜单原型图</p>
<h2 id="系统开发环境"><a href="#系统开发环境" class="headerlink" title="系统开发环境"></a>系统开发环境</h2><p>硬件环境：处理器：Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz 1.80 GHz，内存24.0GB，系统类型：64 位操作系统，基于 x64 的处理器。</p>
<p>软件环境：windows 版本 windows10 专业版，MySQL 版本：8.0.19，Python 版本：</p>
<p>3.8.2，Django 版本：2.0，VUE 版本：2.6.10，Element-UI 版本：2.13.0，JS-MD5 版本：</p>
<p>3.4.4。</p>
<h2 id="系统可行性分析"><a href="#系统可行性分析" class="headerlink" title="系统可行性分析"></a>系统可行性分析</h2><h3 id="技术可行性分析"><a href="#技术可行性分析" class="headerlink" title="技术可行性分析"></a>技术可行性分析</h3><p>本系统采用前后端分离的方式开发。前端主要使用 Vue.js 框架可以对数据进行双向绑定，结合 Element-UI 框架等多种组件高效开发，后端使用 MTV 模式的 Django 框架开发实现高内聚低耦合，易于代码维护。数据库使用 ORM 模型框架结合 MySQL 便于操作提高开发效率，降低开发成本。</p>
<h3 id="安全可行性分析"><a href="#安全可行性分析" class="headerlink" title="安全可行性分析"></a>安全可行性分析</h3><p>安全可行性方面，项目使用 Django 自带的 Session 技术和 XSS 保障系统安全。基于 Session 机制多因素认证用户身份验证的解决方案，网站根据 Session ID 和服务器上存储的 Session 信息核实身份等对多个因素验证，来提高系统访问的安全[10]。同时，使用基于promise 的Axios 对浏览器端，支持防止 CSRF（即跨站请求伪造），自动转换 JSON数据，主动取消请求[11]。为了对项目在不同时期表现出的状态进行记录和维护，使用Git 版本控制工具，保证在需要能够回溯至上个版本，减少由于工作丢失、修改记录以及相互覆盖的损失[12]。</p>
<h1 id="第-4-章-系统设计"><a href="#第-4-章-系统设计" class="headerlink" title="第 4 章 系统设计"></a>第 <strong>4</strong> 章 系统设计</h1><h2 id="体系结构设计"><a href="#体系结构设计" class="headerlink" title="体系结构设计"></a>体系结构设计</h2><p>盘中餐健康饮食网站分为前台、用户后台和管理员后台三个部分。前台主要功能包括用户登录注册、查看食物 、查看新闻资讯、查看每日打卡、文章分享等。用户后台负责用户个人中心管理、每日打卡管理和榜单管理。管理员后台负责用户管理、食物类别管理、食物信息管理、每日打卡管理、系统管理等。系统体系结构图如图 4.1。</p>
<p><img src="/media/2629b3477b3dc434c069857ded0bbc97.jpeg"></p>
<p>图 4.1 体系结构图</p>
<h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><ol>
<li><p><strong>E-R</strong> 图</p>
<p>系统的 E-R 图主要核心从用户角色出发，展示包括用户、每日打卡信息、榜单信息、新闻资讯信息、食物类型信息、食物信息和文章分享信息实体间的联系。数据库设计的E-R 图如图 4.2 所示。</p>
</li>
</ol>
<p><img src="/media/f1919788f4ccac7886104007acca1d91.jpeg"></p>
<h3 id="表结构设计"><a href="#表结构设计" class="headerlink" title="表结构设计"></a>表结构设计</h3><p>图 4.2 数据库 E-R 图</p>
<p>用户表的字段为创建时间、用户名、姓名、头像、密码等。id 为主键。该表存储用户基本信息用于用户注册，登录等。用户表结构如表 4.1 所示。</p>
<p>表 4.1 用户表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>yonghuming</td>
<td>用户名</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>xingming</td>
<td>姓名</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>touxiang</td>
<td>头像</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>xingbie</td>
<td>性别</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
</tbody></table>
<p>续表 4.1 用户表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>mima</td>
<td>密码</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>shouji</td>
<td>手机</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
</tbody></table>
<p>新闻资讯表的字段为标题、简介、图片、内容等，id 为主键。该表存储新闻资讯的相关信息。新闻资讯表结构如表 4.2 所示。</p>
<p>表 4.2 新闻资讯表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>新闻资讯 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>title</td>
<td>标题</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>introduction</td>
<td>简介</td>
<td>longtext</td>
<td></td>
</tr>
<tr>
<td>picture</td>
<td>图片</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>content</td>
<td>内容</td>
<td>longtext</td>
<td>NOT NULL</td>
</tr>
</tbody></table>
<p>每日打卡表的字段为打卡编号、打卡名称、空盘次数、打卡时间等，id 为主键。该表用于存储用户每日打卡的相关信息。每日打卡表结构如表 4.3 所示。</p>
<p>表 4.3 每日打卡表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>打卡 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>Dakabianhao</td>
<td>打卡编号</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>Dakamingcheng</td>
<td>打卡名称</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>tupian</td>
<td>图片</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>Kongpancishu</td>
<td>空盘次数</td>
<td>int</td>
<td>无</td>
</tr>
<tr>
<td>Dakashijian</td>
<td>打卡时间</td>
<td>datetime</td>
<td>无</td>
</tr>
<tr>
<td>Yonghuming</td>
<td>用户名</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>Xingming</td>
<td>姓名</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>beizhu</td>
<td>备注</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
</tbody></table>
<p>食物信息表的字段为食物名称、食物类型、图片、热量值等，id 为主键。该表存储每个食物的详细信息。食物信息表结构如表 4.4 所示。</p>
<p>表 4.4 食物信息表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>食物信息 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>shiwumingcheng</td>
<td>食物名称</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>tupian</td>
<td>图片</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>shiwuleixing</td>
<td>食物类型</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>reliangzhi</td>
<td>热量值</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
</tbody></table>
<p>榜单表的字段为打卡编号、空盘次数、图片、更新时间等，id 为主键。该表存储管理员根据用户的每日打卡信息所发布的榜单中，每个榜单的详细信息。榜单表结构如表</p>
<p>4.5 所示。</p>
<p>表 4.5 榜单表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>榜单 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>dakabianhao</td>
<td>打卡编号</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>tupian</td>
<td>图片</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>kongpancishu</td>
<td>空盘次数</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>yonghuming</td>
<td>用户名</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>xingming</td>
<td>姓名</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>gengxinshijian</td>
<td>更新时间</td>
<td>date</td>
<td>无</td>
</tr>
</tbody></table>
<p>食物类型表的字段为食物类型和创建时间，id 为主键。该表存储着每个食物类型的详细信息。食物类型表结构如表 4.6 所示。</p>
<p>表 4.6 食物类型表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>食物类型 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>shiwuleixing</td>
<td>食物类型</td>
<td>varchar(200)</td>
<td>NOT NULL</td>
</tr>
</tbody></table>
<p>文章分享表的字段为帖子标题、帖子内容、用户 id、状态等，id 为主键。该表存储着每篇文章的详细信息。文章分享表结构如表 4.7 所示。</p>
<p>表 4.7 文章分享表</p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>名称</th>
<th>数据类型</th>
<th>约束</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>文章 ID</td>
<td>bigint(20)</td>
<td>PK</td>
</tr>
<tr>
<td>addtime</td>
<td>创建时间</td>
<td>timestamp</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>title</td>
<td>帖子标题</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>content</td>
<td>帖子内容</td>
<td>longtext</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>parentid</td>
<td>父节点 id</td>
<td>bignit</td>
<td>无</td>
</tr>
<tr>
<td>userid</td>
<td>用户 id</td>
<td>bignit</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>username</td>
<td>用户名</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
<tr>
<td>isdone</td>
<td>状态</td>
<td>varchar(200)</td>
<td>无</td>
</tr>
</tbody></table>
<h2 id="4-3-JSON-接口设计"><a href="#4-3-JSON-接口设计" class="headerlink" title="4.3 JSON 接口设计"></a>4.3 JSON 接口设计</h2><p>网站获取食物类型列表接口设计。该接口用于在前端显示食物类型列表。获取食物类型列表接口设计如表 4.8 所示。</p>
<p>表 4.8 获取食物类型列表接口</p>
<table>
<thead>
<tr>
<th>功能说明</th>
<th>获取食物类型列表接口</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>URL</strong> 地址</td>
<td><a target="_blank" rel="noopener" href="http://localhost:8080/django1q7tt/shiwuleixing/list">http://localhost:8080/django1q7tt/shiwuleixing/list</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>是否必须</td>
<td>类型</td>
<td>描述</td>
</tr>
<tr>
<td>无参数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>请求类型</td>
<td>POST</td>
<td></td>
<td></td>
</tr>
<tr>
<td>返回参数类型</td>
<td>JSON</td>
<td></td>
<td></td>
</tr>
<tr>
<td>返回参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>描述</td>
<td></td>
<td></td>
</tr>
<tr>
<td>code</td>
<td>数据状态码（成功状态码是 200）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>具体数据</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>网站获取食物信息列表接口设计。该接口用于在前端显示食物信息列表。获取食物信息列表接口设计如表 4.9 所示。</p>
<p>表 4.9 获取食物信息列表接口</p>
<table>
<thead>
<tr>
<th>功能说明</th>
<th>获取食物信息列表接口</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>URL</strong> 地址</td>
<td><a target="_blank" rel="noopener" href="http://localhost:8080/django1q7tt/shiwuxinxi/list">http://localhost:8080/django1q7tt/shiwuxinxi/list</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>是否必须</td>
<td>类型</td>
<td>描述</td>
</tr>
<tr>
<td>无参数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>请求类型</td>
<td>POST</td>
<td></td>
<td></td>
</tr>
<tr>
<td>返回参数类型</td>
<td>JSON</td>
<td></td>
<td></td>
</tr>
<tr>
<td>返回参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>描述</td>
<td></td>
<td></td>
</tr>
<tr>
<td>code</td>
<td>数据状态码（成功状态码是 200）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>具体数据</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>网站获取每日打卡详细信息接口设计。该接口用于在前端、后端获取每日打卡的详细信息。获取每日打卡详细信息接口设计如表 4.10 所示。</p>
<p>表 4.10 获取每日打卡详细信息接口</p>
<table>
<thead>
<tr>
<th>功能说明</th>
<th>获取每日打卡详细信息接口</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>URL</strong> 地址</td>
<td><a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a> django1q7tt&#x2F; meiridaka&#x2F;detail</td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>是否必须</td>
<td>类型</td>
<td>描述</td>
</tr>
<tr>
<td>id</td>
<td>是</td>
<td>Number</td>
<td>打卡 id</td>
</tr>
<tr>
<td>dakabianhao</td>
<td>否</td>
<td>String</td>
<td>打卡编号</td>
</tr>
<tr>
<td>tupian</td>
<td>否</td>
<td>String</td>
<td>订单状态</td>
</tr>
<tr>
<td>kongpancishu</td>
<td>否</td>
<td>Number</td>
<td>空盘次数</td>
</tr>
<tr>
<td>dakashijian</td>
<td>否</td>
<td>String</td>
<td>打卡时间</td>
</tr>
<tr>
<td>yonghuming</td>
<td>否</td>
<td>String</td>
<td>用户名</td>
</tr>
<tr>
<td>xingming</td>
<td>否</td>
<td>String</td>
<td>姓名</td>
</tr>
<tr>
<td>dakamingcheng</td>
<td>否</td>
<td>String</td>
<td>打卡名称</td>
</tr>
<tr>
<td>beizhu</td>
<td>否</td>
<td>String</td>
<td>备注</td>
</tr>
<tr>
<td>请求类型</td>
<td>POST</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>续表 4.10 获取每日打卡详细信息接口</p>
<table>
<thead>
<tr>
<th>返回参数类型</th>
<th>JSON</th>
</tr>
</thead>
<tbody><tr>
<td>返回参数列表</td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>描述</td>
</tr>
<tr>
<td>code</td>
<td>数据状态码（成功状态码是 200）</td>
</tr>
<tr>
<td>data</td>
<td>具体数据</td>
</tr>
</tbody></table>
<p>网站保存榜单信息接口设计，该接口保存创建或修改好的榜单信息。保存榜单接口设计如表 4.11 所示。</p>
<p>表 4.11 保存榜单接口</p>
<table>
<thead>
<tr>
<th>功能说明</th>
<th>保存榜单接口</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>URL</strong> 地址</td>
<td><a target="_blank" rel="noopener" href="http://localhost:8080/django1q7tt/bangdan/save">http://localhost:8080/django1q7tt/bangdan/save</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>是否必须</td>
<td>类型</td>
<td>描述</td>
</tr>
<tr>
<td>id</td>
<td>是</td>
<td>Number</td>
<td>榜单 id</td>
</tr>
<tr>
<td>dakabianhao</td>
<td>否</td>
<td>String</td>
<td>打卡编号</td>
</tr>
<tr>
<td>tupian</td>
<td>否</td>
<td>String</td>
<td>订单状态</td>
</tr>
<tr>
<td>kongpancishu</td>
<td>否</td>
<td>Number</td>
<td>空盘次数</td>
</tr>
<tr>
<td>yonghuming</td>
<td>否</td>
<td>String</td>
<td>用户名</td>
</tr>
<tr>
<td>xingming</td>
<td>否</td>
<td>String</td>
<td>姓名</td>
</tr>
<tr>
<td>gengxingshijian</td>
<td>否</td>
<td>String</td>
<td>更新时间</td>
</tr>
<tr>
<td>请求类型</td>
<td>POST</td>
<td></td>
<td></td>
</tr>
<tr>
<td>返回参数类型</td>
<td>JSON</td>
<td></td>
<td></td>
</tr>
<tr>
<td>返回参数列表</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>参数名称</td>
<td>描述</td>
<td></td>
<td></td>
</tr>
<tr>
<td>code</td>
<td>数据状态码（成功状态码是 200）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>具体数据</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="第-5-章-系统实现"><a href="#第-5-章-系统实现" class="headerlink" title="第 5 章 系统实现"></a>第 <strong>5</strong> 章 系统实现</h1><h2 id="后台功能模块实现"><a href="#后台功能模块实现" class="headerlink" title="后台功能模块实现"></a>后台功能模块实现</h2><h3 id="新增食物类型功能模块实现"><a href="#新增食物类型功能模块实现" class="headerlink" title="新增食物类型功能模块实现"></a>新增食物类型功能模块实现</h3><p>新增食物类型功能的实现，前端发送请求后，通过 URL 调用 shiwuleixing 的 list、add 和 save 接口操作后台对 shiwuleixing 数据库表进行增、删、改、查操作，最后将数据逐级返回到前端。查看食物类型列表如图 5.1 所示，新增食物类型功能实现如图 5.2 所示。</p>
<p><img src="/media/49f1599942f4c7756c8f80f9e57a9f7d.jpeg"></p>
<p>图 5.1 查看食物类型列表</p>
<p><img src="/media/93d9948d56fbef1c4c62fd9d5c6c6075.jpeg"></p>
<p>图 5.2 新增食物类型功能实现</p>
<p>后台新增食物类型功能代码如下所示：</p>
<h3 id="删除文章分享的帖子功能模块实现"><a href="#删除文章分享的帖子功能模块实现" class="headerlink" title="删除文章分享的帖子功能模块实现"></a>删除文章分享的帖子功能模块实现</h3><p>删除文章分享的帖子功能的实现，前端发送请求后，通过 URL 先调用 forum_page 接口权限为管理员查看 forum 记录，再调用 forum_delete 接口操作后台对 forum 数据库表的信息进行删除操作，最后将数据逐级返回到前端。删除文章分享的帖子功能模块实现如图 5.3 所示。</p>
<p><img src="/media/1bdfc65ae82daf224f15abdc827dfbe1.jpeg"></p>
<p>图 5.3 删除文章分享的帖子模块实现</p>
<p>删除文章分享的帖子模块功能代码如下所示：</p>
<h3 id="修改每日打卡信息模块实现"><a href="#修改每日打卡信息模块实现" class="headerlink" title="修改每日打卡信息模块实现"></a>修改每日打卡信息模块实现</h3><p>修改每日打卡信息模块的实现，前端发送请求后，通过 URL 调用 meiridaka_update 接口，对从 meiridaka 数据库表中通过 meiridaka_info 接口选定数据的修改，最后将数据逐级返回到前端。修改每日打卡信息功能模块实现如图 5.4 所示</p>
<p><img src="/media/c465a20dbab11799620e8963a6c38f96.jpeg"></p>
<p>图 5.4 修改每日打卡信息功能实现</p>
<p>修改每日打卡信息模块功能代码如下所示：</p>
<h2 id="前台功能模块实现"><a href="#前台功能模块实现" class="headerlink" title="前台功能模块实现"></a>前台功能模块实现</h2><h3 id="用户查看每日打卡详情功能模块实现"><a href="#用户查看每日打卡详情功能模块实现" class="headerlink" title="用户查看每日打卡详情功能模块实现"></a>用户查看每日打卡详情功能模块实现</h3><p>用户查看每日打卡详情功能的实现，前端发送请求后，通过 URL 调用 meiridaka 的list 和 detail 接口操作后台对 meiridaka 数据库表进行查找查看操作，最后将数据逐级返回到前端。用户查看每日打卡详情功能实现如图 5.5 所示。</p>
<p><img src="/media/78806c6edc2e45dfe333a6c8f5e71681.jpeg"></p>
<p>图 5.5 用户查看每日打卡详情功能实现</p>
<p>用户查看每日打卡详情功能代码如下所示：</p>
<h1 id="第-6-章-系统测试"><a href="#第-6-章-系统测试" class="headerlink" title="第 6 章 系统测试"></a>第 <strong>6</strong> 章 系统测试</h1><h2 id="功能测试"><a href="#功能测试" class="headerlink" title="功能测试"></a>功能测试</h2><h3 id="食物类型管理模块测试"><a href="#食物类型管理模块测试" class="headerlink" title="食物类型管理模块测试"></a>食物类型管理模块测试</h3><p>管理员进入食物类型管理进行操作，系统会对管理员操作是否成功进行提示。食物类型管理功能测试用例如表 6.1 所示。</p>
<p>表 6.1 食物类型管理功能测试用例</p>
<table>
<thead>
<tr>
<th>用例编号</th>
<th>用例描述</th>
<th>操作过程及数据</th>
<th>预期结果</th>
<th>实际结果</th>
</tr>
</thead>
<tbody><tr>
<td>adminFoodT ype-01</td>
<td>查询搜索食物类型</td>
<td>点击食物类型搜索框，输入搜索内容。</td>
<td>进入搜索结果页面， 正确显示搜索内容。</td>
<td>正确</td>
</tr>
<tr>
<td>adminFoodT ype-02</td>
<td>新增食物类型信息</td>
<td>点击新增按钮，进入新增食物类 型页面，输入食物类型，点击提交按钮。</td>
<td>系统提示“操作成功”。</td>
<td>正确</td>
</tr>
<tr>
<td>adminFoodT ype-03</td>
<td>修改食物类型信息</td>
<td>点击修改按钮，进入修改食物类型页面，修改完成后点击，提交 按钮。</td>
<td>系统提示“操作成功”。</td>
<td>正确</td>
</tr>
<tr>
<td>adminFoodT ype-04</td>
<td>删除食物类型信息</td>
<td>点击删除按钮，系统提示“确定 进行删除操作？”，点击确定按钮。</td>
<td>系统提示“操作成功”。</td>
<td>正确</td>
</tr>
</tbody></table>
<h3 id="管理员新增新闻资讯模块测试"><a href="#管理员新增新闻资讯模块测试" class="headerlink" title="管理员新增新闻资讯模块测试"></a>管理员新增新闻资讯模块测试</h3><p>管理员在管理新闻资讯页面新增新闻资讯，系统检测输入内容的合法性并返回提示。管理员新增新闻资讯功能测试用例如表 6.2 所示。</p>
<p>表 6.2 管理员新增新闻资讯功能测试用例</p>
<table>
<thead>
<tr>
<th>用例编号</th>
<th>用例描述</th>
<th>操作过程及数据</th>
<th>预期结果</th>
<th>实际结果</th>
</tr>
</thead>
<tbody><tr>
<td>addNews-01</td>
<td>正常输入新闻资讯信息</td>
<td>点击提交按钮。</td>
<td>系统提示“操作成功”</td>
<td>正确</td>
</tr>
<tr>
<td>addNews-02</td>
<td>未填写新闻标题</td>
<td>输入内容和图片等内容，未输入新闻标题，点击提交按钮。</td>
<td>系统在标题处提示 “标题不能为空”。</td>
<td>正确</td>
</tr>
</tbody></table>
<h3 id="用户榜单管理模块测试"><a href="#用户榜单管理模块测试" class="headerlink" title="用户榜单管理模块测试"></a>用户榜单管理模块测试</h3><p>用户进入榜单管理进行操作，系统会对用户是否操作成功进行提示。用户榜单管理功能测试用例如表 6.3 所示。</p>
<p>表 6.3 用户榜单管理功能测试用例</p>
<table>
<thead>
<tr>
<th>用例编号</th>
<th>用例描述</th>
<th>操作过程及数据</th>
<th>预期结果</th>
<th>实际结果</th>
</tr>
</thead>
<tbody><tr>
<td>adminRankin g-01</td>
<td>查询榜单信息</td>
<td>用户输入正确的打卡编号或用户名，点击查询按钮。</td>
<td>系统在榜单列表显示查询到的榜单信 息。</td>
<td>正确</td>
</tr>
</tbody></table>
<p>续表 6.3 用户榜单管理功能测试用例</p>
<table>
<thead>
<tr>
<th>用例编号</th>
<th>用例描述</th>
<th>操作过程及数据</th>
<th>预期结果</th>
<th>实际结果</th>
</tr>
</thead>
<tbody><tr>
<td>adminRankin g-02</td>
<td>错误输入打卡编号，搜 索榜单信息</td>
<td>用户输入错误的打卡编号，点击查询按钮。</td>
<td>系统在榜单列表显示“暂无数据”。</td>
<td>正确</td>
</tr>
<tr>
<td>adminRankin g-03</td>
<td>查看榜单详 情信息</td>
<td>点击详情按钮。</td>
<td>系统进入榜单详情 页。</td>
<td>正确</td>
</tr>
</tbody></table>
<h3 id="用户每日打卡管理模块测试"><a href="#用户每日打卡管理模块测试" class="headerlink" title="用户每日打卡管理模块测试"></a>用户每日打卡管理模块测试</h3><p>用户进入每日打卡管理进行操作，系统会对用户是否操作成功进行提示。用户每日打卡管理功能测试用例如表 6.4 所示。</p>
<p>表 6.4 用户每日打卡管理功能测试用例</p>
<table>
<thead>
<tr>
<th>用例编号</th>
<th>用例描述</th>
<th>操作过程及数据</th>
<th>预期结果</th>
<th>实际结果</th>
</tr>
</thead>
<tbody><tr>
<td>adminClockI n-01</td>
<td>查询搜索打卡信息</td>
<td>用户输入正确的打卡编号或姓名，点击查询按钮。</td>
<td>系统在每日打卡列表显示查询内容。</td>
<td>正确</td>
</tr>
<tr>
<td>adminClockI n-02</td>
<td>错误输入打卡编号信息搜索每日打 卡信息</td>
<td>用户输入错误的打卡编号，点击查询按钮。</td>
<td>系统在每日打卡列 表显示“暂无数据”。</td>
<td>正确</td>
</tr>
<tr>
<td>adminClockI n-03</td>
<td>新增每日打卡信息</td>
<td>点击新增按钮，进入新增每日打卡页面，输入打卡名称、空盘次数、打卡时间等内容，点击提交 按钮。</td>
<td>系统提示“操作成功”。</td>
<td>正确</td>
</tr>
<tr>
<td>adminClockI n-04</td>
<td>修改每日打卡信息</td>
<td>点击修改按钮，进入修改每日打卡页面，修改完成后点击，提交 按钮。</td>
<td>系统提示“操作成功”。</td>
<td>正确</td>
</tr>
<tr>
<td>adminClockI n-05</td>
<td>删除每日打卡信息</td>
<td>点击删除按钮，系统提示“确定 进行删除操作？”，点击确定按钮。</td>
<td>系统提示“操作成功”。</td>
<td>正确</td>
</tr>
</tbody></table>
<h2 id="测试结论"><a href="#测试结论" class="headerlink" title="测试结论"></a>测试结论</h2><p>对网站各个模块进行了功能测试后得出，网站每个模块都实现了需求分析描述的功能。测试过程中，每个用例功能都具备完整性，大部分功能都能正常实现。有个别接口出现的断言错误和参数传递错误也已修复成功。网站也满足用户多样化，支持 Firefox、IE，Google Chrome 等主流浏览器，功能实现均不受影响。</p>
<p>盘中餐健康饮食网站使用Python 语言进行开发，基于 Django 框架设计与实现。从萌生想法到根据研究调研进行需求分析，再到网站的具体功能需求分析与系统设计，最后完成代码开发与测试，整个过程都严格按照软件工程开发的思想进行。目前网站实现了用户每日空盘打卡、分享文章、查看光盘次数榜单、查看食物类型与热量信息等功能。管理员管理用户每日空盘打卡、管理榜单、管理新闻资讯与食物类型信息等功能。</p>
<p>网站开发时，使用前后端分离方式开发。前端使用 Vue.js 框架与 Element-UI 等多种 UI 组件，后端开发用开源的 Django 框架和 MTV 设计模型，使用 Django 的内置管理与 ORM 框架等 Django 自带组件实现网站的可扩展性与安全性。其中在后端使用 Django 的 ORM 框架（对象关系映射）与 MySQL 结合，不仅简洁化对数据库的操作，更是一个用于保护SQL 注入之类的攻击的强大工具；</p>
<p>在前端用 Django 的内部工具 CSRF 令牌（跨站点）对付跨站点请求伪造对 HTML 模板的攻击[17]。在实现需求分析与系统设计的基本功能以后，对网站进行了一系列的测试， 找到网站开发过程中出现的代码开发错误，并修复。</p>
<p>已开发的功能仍有待完善之处。首先，用户是否可以在前端页面的每日打卡详情页， 分别查看自己的每日打卡情况与他人打卡情况，因此下一步会将每日打卡页面设计为“我的每日打卡”和“每日打卡的世界”两个板块展示用户的空盘打卡信息。其次，管理员在管理用户打卡次数榜单时需要管理员手打排名，加大了管理员的工作量与工作效率。考虑研究自动加入榜单与排名算法进行优化。</p>
<p>整体来说，基于 Django 的盘中餐健康饮食网站正能量地推动政策落实，在众多功能类型的网站与应用中具有很大的市场优势。其次在功能上可根据需求改变，具有很强的可扩展性。如果网站出现问题，因前后端分离开发也便于维护。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2023/03/11/python%E7%BD%91%E7%AB%99--%E7%9B%98%E4%B8%AD%E9%A4%90/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/code/" rel="tag">code</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2023/03/11/Python%E7%BD%91%E7%AB%99%E4%BB%A3%E7%A0%812/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            Python网站代码2
          
        </div>
      </a>
    
    
      <a href="/2023/03/11/Python%E7%BD%91%E7%AB%99%E4%BB%A3%E7%A0%811/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Python网站代码1</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.staticfile.org/valine/1.4.16/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "",
    app_key: "",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2019-2023
        <i class="ri-heart-fill heart_icon"></i> LIXiaohan
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
      <li>
          <img src="/images/beian.png"></img>
          <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=01234567890123" target="_black" rel="nofollow">浙公网安备01234567890123号</a>
      </li>
        
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src=''></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Pravite Home"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.staticfile.org/mathjax/2.7.7/MathJax.js"></script>
<script src="https://cdn.staticfile.org/mathjax/2.7.7/config/TeX-AMS-MML_HTMLorMML-full.js"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    
<script>
  const password = "11";
  const lock_password = window.sessionStorage.getItem("lock_password");
  console.log(password, lock_password);
  if (lock_password !== password) {
    Swal.fire({
      title: "请输入访问密码",
      input: "text",
      inputAttributes: {
        autocapitalize: "off",
      },
      showCancelButton: false,
      showLoaderOnConfirm: true,
      allowOutsideClick: false,
      confirmButtonText: "确定",
    }).then((result) => {
      console.log(result);
      if (result.isConfirmed) {
        console.log(password);
        if (result.value === password) {
          window.sessionStorage.setItem("lock_password", result.value);
        } else {
          Swal.fire({
            icon: "error",
            title: "密码错误，请重试",
            confirmButtonText: "确定",
            allowOutsideClick: false,
          }).then(() => {
            window.location.reload();
          });
        }
      }
    });
  }
</script>


  </div>
</body>

</html>